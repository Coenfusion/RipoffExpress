@using RipoffExpress.Models;

@model IEnumerable<Category>

@{
    ViewData["Title"] = "Home Page";
}

<script type="text/javascript" src="~/js/LoadPartial.js"></script>

<div class="row">
    <div id="categoryBox" class="col-md-3">
        <div class="productCategories" id="LoadCategories">
            <h4>Categories</h4>
            <table>
                @foreach (Category Category in Model)
                {
                    <tr>
                        <td>
                            <a value="@Category.Name" onclick="ShowProducts(@Category.Id)">@Category.Name</a>
                        </td>
                    </tr>
                }
            </table>
        </div>
    </div>
    <div class="col-md-1"></div>
    <div id ="productBox" class="col-md-8">
        <div class="Products" id="LoadProducts" data-url="@Url.Action("MostRecentProducts", "Home")">

        </div>
    </div>
</div>

<script>
    function ShowProducts(prop) {
        var url = "@Html.Raw(Url.Action("ProductOverview", "Home", new { id = "catId" }))"
        url = url.replace("catId", prop);
        $("#LoadProducts").load(url)
    }
    $(document).ready(function () {
        registerAjaxLinkLoad("#LoadProducts", ".Products");
    })
</script>